use super::State;

// These tests come from
// https://github.com/projf/display_controller/blob/master/model/tmds-test-python.txt (MIT
// license).
#[test]
fn sequential() {
    let mut state = State::new();
    assert_eq!(state.convert(0b00000000).repr, 0b0100000000);
    assert_eq!(state.cnt, -8);
    assert_eq!(state.convert(0b00000001).repr, 0b0111111111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00000010).repr, 0b0111111110);
    assert_eq!(state.cnt, 6);
    assert_eq!(state.convert(0b00000011).repr, 0b0100000001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00000100).repr, 0b0111111100);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b00000101).repr, 0b0100000011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00000110).repr, 0b0100000010);
    assert_eq!(state.cnt, -6);
    assert_eq!(state.convert(0b00000111).repr, 0b0111111101);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00001000).repr, 0b0111111000);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b00001001).repr, 0b0100000111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00001010).repr, 0b0100000110);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b00001011).repr, 0b0111111001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00001100).repr, 0b0100000100);
    assert_eq!(state.cnt, -6);
    assert_eq!(state.convert(0b00001101).repr, 0b0111111011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00001110).repr, 0b0111111010);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b00001111).repr, 0b0100000101);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00010000).repr, 0b0111110000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00010001).repr, 0b0100001111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00010010).repr, 0b0100001110);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b00010011).repr, 0b0111110001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00010100).repr, 0b0100001100);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b00010101).repr, 0b0111110011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00010110).repr, 0b0111110010);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b00010111).repr, 0b0100001101);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00011000).repr, 0b0100001000);
    assert_eq!(state.cnt, -6);
    assert_eq!(state.convert(0b00011001).repr, 0b0111110111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00011010).repr, 0b0111110110);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b00011011).repr, 0b0100001001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00011100).repr, 0b0111110100);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b00011101).repr, 0b0100001011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00011110).repr, 0b1001011111);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b00011111).repr, 0b1010100000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00100000).repr, 0b0111100000);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b00100001).repr, 0b0100011111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00100010).repr, 0b0100011110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00100011).repr, 0b0111100001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00100100).repr, 0b0100011100);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b00100101).repr, 0b0111100011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00100110).repr, 0b0111100010);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00100111).repr, 0b0100011101);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00101000).repr, 0b0100011000);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b00101001).repr, 0b0111100111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00101010).repr, 0b0111100110);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b00101011).repr, 0b0100011001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00101100).repr, 0b0111100100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00101101).repr, 0b0100011011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00101110).repr, 0b1001001111);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b00101111).repr, 0b1010110000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00110000).repr, 0b0100010000);
    assert_eq!(state.cnt, -6);
    assert_eq!(state.convert(0b00110001).repr, 0b0111101111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00110010).repr, 0b0111101110);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b00110011).repr, 0b0100010001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00110100).repr, 0b0111101100);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b00110101).repr, 0b0100010011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00110110).repr, 0b1001000111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00110111).repr, 0b1010111000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00111000).repr, 0b0111101000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00111001).repr, 0b0100010111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00111010).repr, 0b1001000011);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b00111011).repr, 0b1010111100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00111100).repr, 0b1001000001);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b00111101).repr, 0b1010111110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b00111110).repr, 0b1010111111);
    assert_eq!(state.cnt, 6);
    assert_eq!(state.convert(0b00111111).repr, 0b1001000000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01000000).repr, 0b0111000000);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b01000001).repr, 0b0100111111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01000010).repr, 0b0100111110);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b01000011).repr, 0b0111000001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01000100).repr, 0b0100111100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01000101).repr, 0b0111000011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01000110).repr, 0b0111000010);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b01000111).repr, 0b0100111101);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01001000).repr, 0b0100111000);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b01001001).repr, 0b0111000111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01001010).repr, 0b0111000110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01001011).repr, 0b0100111001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01001100).repr, 0b0111000100);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b01001101).repr, 0b0100111011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01001110).repr, 0b1001101111);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b01001111).repr, 0b1010010000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01010000).repr, 0b0100110000);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b01010001).repr, 0b0111001111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01010010).repr, 0b0111001110);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b01010011).repr, 0b0100110001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01010100).repr, 0b0111001100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01010101).repr, 0b0100110011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01010110).repr, 0b1001100111);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b01010111).repr, 0b1010011000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01011000).repr, 0b0111001000);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b01011001).repr, 0b0100110111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01011010).repr, 0b1001100011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01011011).repr, 0b1010011100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01011100).repr, 0b1001100001);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b01011101).repr, 0b1010011110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01011110).repr, 0b1010011111);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b01011111).repr, 0b1001100000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01100000).repr, 0b0100100000);
    assert_eq!(state.cnt, -6);
    assert_eq!(state.convert(0b01100001).repr, 0b0111011111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01100010).repr, 0b0111011110);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b01100011).repr, 0b0100100001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01100100).repr, 0b0111011100);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b01100101).repr, 0b0100100011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01100110).repr, 0b1001110111);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b01100111).repr, 0b1010001000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01101000).repr, 0b0111011000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01101001).repr, 0b0100100111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01101010).repr, 0b1001110011);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b01101011).repr, 0b1010001100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01101100).repr, 0b1001110001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01101101).repr, 0b1010001110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01101110).repr, 0b1010001111);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b01101111).repr, 0b1001110000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01110000).repr, 0b0111010000);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b01110001).repr, 0b0100101111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01110010).repr, 0b1001111011);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b01110011).repr, 0b1010000100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01110100).repr, 0b1001111001);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b01110101).repr, 0b1010000110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01110110).repr, 0b1010000111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01110111).repr, 0b1001111000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01111000).repr, 0b1001111101);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b01111001).repr, 0b1010000010);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01111010).repr, 0b1010000011);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b01111011).repr, 0b1001111100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01111100).repr, 0b1010000001);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b01111101).repr, 0b1001111110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b01111110).repr, 0b1001111111);
    assert_eq!(state.cnt, 6);
    assert_eq!(state.convert(0b01111111).repr, 0b1010000000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10000000).repr, 0b0110000000);
    assert_eq!(state.cnt, -6);
    assert_eq!(state.convert(0b10000001).repr, 0b0101111111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10000010).repr, 0b0101111110);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b10000011).repr, 0b0110000001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10000100).repr, 0b0101111100);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b10000101).repr, 0b0110000011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10000110).repr, 0b0110000010);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b10000111).repr, 0b0101111101);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10001000).repr, 0b0101111000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10001001).repr, 0b0110000111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10001010).repr, 0b0110000110);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b10001011).repr, 0b0101111001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10001100).repr, 0b0110000100);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b10001101).repr, 0b0101111011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10001110).repr, 0b1000101111);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b10001111).repr, 0b1011010000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10010000).repr, 0b0101110000);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b10010001).repr, 0b0110001111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10010010).repr, 0b0110001110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10010011).repr, 0b0101110001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10010100).repr, 0b0110001100);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b10010101).repr, 0b0101110011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10010110).repr, 0b1000100111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10010111).repr, 0b1011011000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10011000).repr, 0b0110001000);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b10011001).repr, 0b0101110111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10011010).repr, 0b1000100011);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b10011011).repr, 0b1011011100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10011100).repr, 0b1000100001);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b10011101).repr, 0b1011011110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10011110).repr, 0b1011011111);
    assert_eq!(state.cnt, 6);
    assert_eq!(state.convert(0b10011111).repr, 0b1000100000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10100000).repr, 0b0101100000);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b10100001).repr, 0b0110011111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10100010).repr, 0b0110011110);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b10100011).repr, 0b0101100001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10100100).repr, 0b0110011100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10100101).repr, 0b0101100011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10100110).repr, 0b1000110111);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b10100111).repr, 0b1011001000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10101000).repr, 0b0110011000);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b10101001).repr, 0b0101100111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10101010).repr, 0b1000110011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10101011).repr, 0b1011001100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10101100).repr, 0b1000110001);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b10101101).repr, 0b1011001110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10101110).repr, 0b1011001111);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b10101111).repr, 0b1000110000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10110000).repr, 0b0110010000);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b10110001).repr, 0b0101101111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10110010).repr, 0b1000111011);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b10110011).repr, 0b1011000100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10110100).repr, 0b1000111001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10110101).repr, 0b1011000110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10110110).repr, 0b1011000111);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b10110111).repr, 0b1000111000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10111000).repr, 0b1000111101);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b10111001).repr, 0b1011000010);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10111010).repr, 0b1011000011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10111011).repr, 0b1000111100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10111100).repr, 0b1011000001);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b10111101).repr, 0b1000111110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b10111110).repr, 0b1000111111);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b10111111).repr, 0b1011000000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11000000).repr, 0b0101000000);
    assert_eq!(state.cnt, -6);
    assert_eq!(state.convert(0b11000001).repr, 0b0110111111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11000010).repr, 0b0110111110);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b11000011).repr, 0b0101000001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11000100).repr, 0b0110111100);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b11000101).repr, 0b0101000011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11000110).repr, 0b1000010111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11000111).repr, 0b1011101000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11001000).repr, 0b0110111000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11001001).repr, 0b0101000111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11001010).repr, 0b1000010011);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b11001011).repr, 0b1011101100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11001100).repr, 0b1000010001);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b11001101).repr, 0b1011101110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11001110).repr, 0b1011101111);
    assert_eq!(state.cnt, 6);
    assert_eq!(state.convert(0b11001111).repr, 0b1000010000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11010000).repr, 0b0110110000);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b11010001).repr, 0b0101001111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11010010).repr, 0b1000011011);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11010011).repr, 0b1011100100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11010100).repr, 0b1000011001);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b11010101).repr, 0b1011100110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11010110).repr, 0b1011100111);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b11010111).repr, 0b1000011000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11011000).repr, 0b1000011101);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11011001).repr, 0b1011100010);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11011010).repr, 0b1011100011);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b11011011).repr, 0b1000011100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11011100).repr, 0b1011100001);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11011101).repr, 0b1000011110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11011110).repr, 0b1000011111);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b11011111).repr, 0b1011100000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11100000).repr, 0b0110100000);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b11100001).repr, 0b0101011111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11100010).repr, 0b1000001011);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b11100011).repr, 0b1011110100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11100100).repr, 0b1000001001);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b11100101).repr, 0b1011110110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11100110).repr, 0b1011110111);
    assert_eq!(state.cnt, 6);
    assert_eq!(state.convert(0b11100111).repr, 0b1000001000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11101000).repr, 0b1000001101);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b11101001).repr, 0b1011110010);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11101010).repr, 0b1011110011);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b11101011).repr, 0b1000001100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11101100).repr, 0b1011110001);
    assert_eq!(state.cnt, 2);
    assert_eq!(state.convert(0b11101101).repr, 0b1000001110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11101110).repr, 0b1000001111);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11101111).repr, 0b1011110000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11110000).repr, 0b1000000101);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b11110001).repr, 0b1011111010);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11110010).repr, 0b1011111011);
    assert_eq!(state.cnt, 6);
    assert_eq!(state.convert(0b11110011).repr, 0b1000000100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11110100).repr, 0b1011111001);
    assert_eq!(state.cnt, 4);
    assert_eq!(state.convert(0b11110101).repr, 0b1000000110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11110110).repr, 0b1000000111);
    assert_eq!(state.cnt, -2);
    assert_eq!(state.convert(0b11110111).repr, 0b1011111000);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11111000).repr, 0b1011111101);
    assert_eq!(state.cnt, 6);
    assert_eq!(state.convert(0b11111001).repr, 0b1000000010);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11111010).repr, 0b1000000011);
    assert_eq!(state.cnt, -4);
    assert_eq!(state.convert(0b11111011).repr, 0b1011111100);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11111100).repr, 0b1000000001);
    assert_eq!(state.cnt, -6);
    assert_eq!(state.convert(0b11111101).repr, 0b1011111110);
    assert_eq!(state.cnt, 0);
    assert_eq!(state.convert(0b11111110).repr, 0b1011111111);
    assert_eq!(state.cnt, 8);
    assert_eq!(state.convert(0b11111111).repr, 0b1000000000);
}
